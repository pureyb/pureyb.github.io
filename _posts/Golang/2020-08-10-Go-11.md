---
layout: post
title: æ•°ç»„ï¼Œåˆ‡ç‰‡ï¼Œä»¥åŠ Map
categories: [Golang]
description: æ•°ç»„ï¼Œåˆ‡ç‰‡ï¼Œä»¥åŠ Map
keywords: golang
---

## æ•°ç»„

#### æ•°ç»„å®šä¹‰

æ•°ç»„æ˜¯ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ åºåˆ—ã€‚ æ•°ç»„åœ¨å£°æ˜ä¸­å®šä¹‰è¦æŒ‡å®šé•¿åº¦ï¼Œå› æ­¤ä¸èƒ½è¿›è¡Œæ‰©å±•ã€‚ æ•°ç»„å£°æ˜ä¸ºï¼š

```go
// å…ˆæŒ‡å®šé•¿åº¦ï¼Œåœ¨åˆå§‹åŒ–
var arr1 [5]int  // [0 0 0 0 0]
arr1 = [5]int{1,2,3,4,5}

// æŒ‡å®šé•¿åº¦å¹¶åˆå§‹åŒ–
arr2 := [3]int{1, 2, 3}  // [1, 2, 3]

// æ ¹æ®åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­æ•°ç»„é•¿åº¦
arr3 := [...]int{2, 4, 5, 6, 7}  // [2, 4, 5, 6, 7]

// æ ¹æ®ç´¢å¼•åˆå§‹åŒ–
arr4 := [5]int{0:1, 4:2}  //[1 0 0 0 2]
```

#### äºŒç»´æ•°ç»„

```go
var multiD [2][3]int // 2è¡Œ3åˆ—
```

#### ä½¿ç”¨rangeéå†æ•°ç»„

```go
arr3 := [...]int{2, 4, 5, 6, 7}

for i, v := range arr3 {
    fmt.Println(i, v)
}

ç»“æœï¼š
    0 2
    1 4
    2 5
    3 6
    4 7
```

#### å°ç»“

- `[10]int`Â å’Œ `[20]int`Â æ˜¯ä¸åŒçš„ç±»å‹
- è°ƒç”¨ `func f(arr[10]int)`Â ä¼šæ‹·è´æ•°ç»„
- å€¼ä¼ é€’ å°±æ„å‘³ç€è¦èµ° copy

```go
func updateArr(arr [5]int) {
 arr[0] = 100
 fmt.Println("ä¿®æ”¹åçš„arrï¼š", arr)
}
func main() {
 arr3 := [...]int{2, 4, 5, 6, 7}

 fmt.Println("åŸæ¥çš„ï¼š", arr3)
 updateArr(arr3)
 fmt.Println("å†æ¬¡æŸ¥çœ‹åŸå§‹çš„ï¼š", arr3)

è¾“å‡ºç»“æœï¼š
    åŸæ¥çš„ï¼š [2 4 5 6 7]
 ä¿®æ”¹åçš„arrï¼š [100 4 5 6 7]
 å†æ¬¡æŸ¥çœ‹åŸå§‹çš„ï¼š [2 4 5 6 7]
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨updateArr å‡½æ•°å†…å°†ç¬¬ä¸€ä¸ªå€¼ä¿®æ”¹ä¸º100ï¼Œä¼ é€’è¿‡å»çš„æ•°ç»„åªæ˜¯åœ¨é‚£ä¸ªå‡½æ•°å†…é¢å€¼æ”¹å˜äº†ï¼ŒåŸæ¥çš„å¹¶æ²¡æœ‰æ”¹å˜ï¼Œæ‰€ä»¥è§£é‡Šäº†Â è°ƒç”¨ `func f(arr[10]int)`Â ä¼šæ‹·è´æ•°ç»„ã€‚

## åˆ‡ç‰‡slice

### åŸºæœ¬æ¦‚å¿µ

```go
func main() {
 arr := [...]int{0, 1, 2, 3, 4, 5, 6, 7}
 fmt.Println("arr[2:6]:", arr[2:6])  // ä»ä¸‹æ ‡2åˆ°ä¸‹æ ‡6
 fmt.Println("arr[:6]:", arr[:6]) // ä»ä¸‹æ ‡0åˆ°ä¸‹æ ‡6
 fmt.Println("arr[2:]:", arr[2:]) // ä»ä¸‹æ ‡2åˆ°æœ€å
 fmt.Println("arr[:]:", arr[:]) // å…¨éƒ¨
}

è¾“å‡ºç»“æœï¼š
    arr[2:6]: [2 3 4 5]
    arr[:6]: [0 1 2 3 4 5]
    arr[2:]: [2 3 4 5 6 7]
    arr[:]: [0 1 2 3 4 5 6 7]
```

go è¯­è¨€çš„æ•°ç»„ï¼Œcopy å’Œ view æ˜¯åŒæ—¶éƒ½å­˜åœ¨çš„ã€‚

- copy å°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ•°ç»„çš„æ—¶å€™æˆ‘å°†è¿™ä¸ªæ•°ç»„æ‹·è´ä¸€ä»½ï¼Œè¿™æ ·å¯¹äºæ•°ç»„çš„å¢åˆ æ”¹ï¼Œæ˜¯ä¸ä¼šæ”¹å˜åŸæ•°ç»„çš„å€¼çš„
- view ç”±æ•°ç»„æ‰§è¡Œåˆ‡ç‰‡æ‰€è¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ª viewï¼Œå³è§†å›¾ï¼Œè‹¥æˆ‘ä»¬åœ¨è§†å›¾ä¸Šæ“ä½œæ•°ç»„ï¼Œä¼šæ”¹å˜åŸæ•°ç»„

#### copy åœºæ™¯

```go
func  updateArr(arr [5]int)  {
  arr[0]  =  100
  fmt.Println("ä¿®æ”¹åçš„arrï¼š", arr)
}

func  main()  {
  arr3  :=  [...]int{2,  4,  5,  6,  7}
  fmt.Println("åŸæ¥çš„ï¼š", arr3)
  updateArr(arr3)
  fmt.Println("å†æ¬¡æŸ¥çœ‹åŸå§‹çš„ï¼š", arr3)
}

è¾“å‡ºç»“æœï¼š
åŸæ¥çš„ï¼š [2 4 5 6 7]
ä¿®æ”¹åçš„arrï¼š [100 4 5 6 7]
å†æ¬¡æŸ¥çœ‹åŸå§‹çš„ï¼š [2 4 5 6 7]
```

#### viewåœºæ™¯

```go
func  updateArr(arr []int)  {
  arr[0]  =  100
  fmt.Println("ä¿®æ”¹åçš„arrï¼š", arr)
}

func  main()  {
  arr3  :=  [...]int{2,  4,  5,  6,  7}
  fmt.Println("åŸæ¥çš„ï¼š", arr3)
  // ä½¿ç”¨åˆ‡ç‰‡
  updateArr(arr3[:])
  fmt.Println("å†æ¬¡æŸ¥çœ‹åŸå§‹çš„ï¼š", arr3)
}

è¾“å‡ºç»“æœï¼š
åŸæ¥çš„ï¼š [2 4 5 6 7]
ä¿®æ”¹åçš„arrï¼š [100 4 5 6 7]
å†æ¬¡æŸ¥çœ‹åŸå§‹çš„ï¼š [100 4 5 6 7]
```

#### ä¸ºä»€ä¹ˆ view èƒ½å¤Ÿæ”¹å˜åŸæ•°ç»„

è™½ç„¶ Slice æœ¬èº«æ˜¯å€¼ç±»å‹ï¼Œä½†æ˜¯å®ƒå†…éƒ¨ä½¿ç”¨äº†å¯¹æ•°ç»„çš„æŒ‡é’ˆå¼•ç”¨ï¼Œæ‰€ä»¥ä¿®æ”¹åˆ‡ç‰‡æ•°æ®ï¼Œä¼šå°†æ•°ç»„åŸæœ‰æ•°æ®ä¿®æ”¹æ‰ã€‚

#### åˆ‡ç‰‡çš„æœ¬è´¨

- åˆ‡ç‰‡å°±æ˜¯ä¸€ä¸ªæ¡†ï¼Œæ¡†æŸ±äº†ä¸€å—è¿ç»­çš„å†…å­˜
- åˆ‡ç‰‡å±äºå¼•ç”¨ç±»å‹ï¼ŒçœŸæ­£çš„æ•°æ®ä¿å­˜ä¸‹åº•å±‚æ•°ç»„ä¸­ã€‚

### Sliceçš„æ‰©å±•

```go
func main() {
    arr := [...]int{0, 1, 2, 3, 4, 5, 6, 7}
 s1 := arr[2:6]
 s2 := s1[3:5]
 fmt.Println("s1--->", s1)  // s1---> [2 3 4 5]
 fmt.Println("s2--->", s2)  // s2---> [5 6]

}
```

å¦‚ä¸Šï¼Œs2 çš„ å–å€¼ è¶…è¿‡äº† s1çš„é•¿åº¦ï¼Œä½†æ˜¯ s2å´å¤šå‡ºäº†ä¸€ä¸ª6

#### åˆ†æ

![image.png](https://cdn.nlark.com/yuque/0/2019/png/211626/1565091486612-dccf4765-2608-4d23-9100-dbc802d64f2c.png#align=left&display=inline&height=171&margin=%5Bobject%20Object%5D&name=image.png&originHeight=249&originWidth=578&size=28728&status=done&style=none&width=396)
å›¾1

---

 Â ![image.png](https://cdn.nlark.com/yuque/0/2019/png/211626/1565091535554-0ac41c91-ba46-4558-9f6b-7a58ecbdbe7c.png#align=left&display=inline&height=150&margin=%5Bobject%20Object%5D&name=image.png&originHeight=217&originWidth=550&size=84747&status=done&style=none&width=380)
å›¾2

å¦‚å›¾1ï¼Œæ˜¯åŸå§‹æ•°ç»„ï¼Œåˆ°å›¾2ä»ä¸‹å¾€ä¸Šï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æœ€ås2çš„ä¸‹æ ‡ å¯¹åº”äº†åŸå§‹æ•°ç»„arrçš„å…ƒç´ 5ï¼Œ6.

#### åº•å±‚å®ç°

![image.png](https://cdn.nlark.com/yuque/0/2019/png/211626/1565091719828-c7f4ac29-a0f4-424c-98eb-6bf857ed7351.png#align=left&display=inline&height=179&margin=%5Bobject%20Object%5D&name=image.png&originHeight=235&originWidth=505&size=48256&status=done&style=none&width=385)
slice å†…éƒ¨å­˜åœ¨ä¸‰ä¸ªå˜é‡

- ptr æŒ‡å‘å¼€å¤´çš„å…ƒç´ 
- len è¯¥æ•°ç»„çš„é•¿åº¦ï¼Œæ–¹æ‹¬å·å–å€¼Â çš„æ—¶å€™åªèƒ½å–åˆ°æ–¹æ‹¬å·é‡Œé¢çš„å€¼ã€‚ä¸‹æ ‡å¤§äºç­‰äºlengthéƒ½ä¼šæŠ¥é”™ã€‚
- cap ä»£è¡¨äº†æ•°ç»„ä»ptr å¼€å§‹ æ•°ç»„çš„æ•´ä¸ªé•¿åº¦ï¼Œ

æ‰€ä»¥å¯¹äºä¸Šé¢çš„ä¾‹å­è€Œè¨€

- s1çš„å€¼ä¸ºã€2 3 4 5ã€‘s2çš„å€¼ä¸ºã€5 6ã€‘
- sliceå¯ä»¥å‘åæ‰©å±•ï¼Œä¸å¯ä»¥å‘å‰æ‰©å±•
- `s[i]`Â  ä¸å¯ä»¥è¶…è¶Š `len(s)`Â , å‘åæ‰©å±•ä¸å¯ä»¥è¶…è¶Šåº•å±‚æ•°ç»„ `cap(s)`

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `cap()`Â  å‡½æ•°æ¥è·å– capçš„é•¿åº¦ã€‚

```go
fmt.Println(len(s1), cap(s1))

å¯¹äºä¸Šé¢çš„ä¾‹å­å°†æ‰“å°å‡º:
4 6

å³ s1 cap çš„é•¿åº¦ä¸º6
```

#### å‘sliceä¸­æ·»åŠ å…ƒç´ 

- ä½¿ç”¨ `append(æ·»åŠ å…ƒç´ çš„æ•°ç»„ï¼Œ éœ€è¦æ·»åŠ çš„å€¼)`Â æ–¹æ³•æ·»åŠ å…ƒç´ ã€‚
- æ·»åŠ å…ƒç´ æ—¶å¦‚æœè¶…è¿‡äº† `cap`Â ï¼Œç³»ç»Ÿä¼šé‡æ–°åˆ†é…æ›´å¤§çš„åº•å±‚æ•°ç»„ï¼Œå¹¶å°†åŸæ¥çš„æ•°ç»„copyè¿‡å»ã€‚
- ç”±äºå€¼ä¼ é€’çš„å…³ç³»ï¼Œå¿…é¡»æ¥æ”¶ append çš„è¿”å›å€¼
- `s = append(s, val)`

### Sliceçš„å…¶ä»–æ“ä½œ

#### åˆ›å»ºslice

å£°æ˜ç±»ä¼¼äºæ•°ç»„å£°æ˜ --- æ²¡æœ‰å®šä¹‰å®¹é‡ã€‚ä½†æ˜¯åº•å±‚å¯¹sliceåˆšå¼€å§‹æ˜¯ä¸€ä¸ª cap ä¸º2çš„æ•°ç»„ï¼Œæ¯æ¬¡æ‰©è‹¥ï¼Œéƒ½å°†åœ¨ä¹‹å‰å®¹é‡çš„åŸºç¡€ä¸Š ä¹˜ä»¥ 2

```go
var arr []int

arr := []int{2, 4, 6, 8}
```

#### ä½¿ç”¨makeåˆ›å»º

è¿™å°†åˆ›å»ºä¸€ä¸ªé›¶å®¹é‡å’Œé›¶é•¿åº¦çš„åˆ‡ç‰‡ã€‚ åˆ‡ç‰‡ä¹Ÿå¯ä»¥å®šä¹‰å®¹é‡å’Œé•¿åº¦ã€‚

```go
numbers := make([]int,5,10)  åˆ‡ç‰‡çš„åˆå§‹é•¿åº¦ä¸º 5ï¼Œå®¹é‡ä¸º 10ã€‚
```

#### copy slice

```go
copy(æ•°ç»„1ï¼Œ æ•°ç»„2)
```

#### delete element

**åˆ é™¤ä¸­é—´å…ƒç´ **

```go
s2 = append(s2[:x], s2[x+1:]...)
```

**åˆ é™¤å¤´å°¾å…ƒç´ **

```go
// åˆ é™¤å¤´å…ƒç´ 
front := s2[0]
s2 = s2[1:]

// åˆ é™¤å°¾å…ƒç´ 
tail := s2[len(s2) - 1]
s2 := s2[len(s2) - 1]
```

## map

### å®šä¹‰

map æ˜¯Â go çš„ä¸€ç§ Key-Value ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å£°æ˜ä¸€ä¸ª map

**å®šä¹‰æ–¹å¼1ï¼š**

```go
m := map[string]string  // å£°æ˜ä¸èµ‹å€¼  === nil

m := map[string]string { // å£°æ˜çš„åŒæ—¶èµ‹å€¼
    "name":"tom",
    "site":"imooc",
}
```

**å®šä¹‰æ–¹å¼2ï¼š**

```go
m := make(map(é”®ç±»å‹)å€¼ç±»å‹) // == empty map

ğŸŒ°ï¼š
å®šä¹‰äº†ä¸€ä¸ªé”®æ˜¯stringç±»å‹ï¼Œå€¼ä¹Ÿæ˜¯stringç±»å‹çš„map
m := make(map(string)string)
```

### ä¸€äº›æ“ä½œ

#### éå†map

éå†ä¸ä¿è¯é¡ºåºï¼Œå¦‚æœéœ€è¦é¡ºåºï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¯¹keyæ’åº

```go
for k, v := range m {
    fmt.Println("k =", k, "v = ", v)
}

åªè·å–key
for k := range m {}

åªè·å–value
for _, v := range m{}
```

#### é€šè¿‡keyè·å–value

```go
value := m[key]
```

#### åˆ¤æ–­è¿™ä¸ªkeyæ˜¯å¦å­˜åœ¨

`value := m[key]`Â çš„å½¢å¼å¯ä»¥è¿”å›ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå€¼ä¸ºè¯¥keyå¯¹åº”çš„valueï¼Œå¦‚æœè¯¥mapä¸­ä¸å­˜åœ¨è¿™ä¸ªkeyï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºä¸²ã€‚è€Œç¬¬äºŒä¸ªå‚æ•°åˆ™è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚

```go
m2 := map[string]string {
    "name":"tom",
    "site":"imooc",
}

age, ok := m2["age"]

fmt.Println("age, ok =", age, ok)

è¾“å‡ºç»“æœï¼š
age, ok =  false
```

#### åˆ é™¤å…ƒç´ 

```go
delete(map, key)
```

#### è·å–å…ƒç´ ä¸ªæ•°

```go
len(map)
```

### mapçš„key

- map ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå¿…é¡»å¯ä»¥æ¯”è¾ƒåƒç­‰
- é™¤äº†sliceã€mapã€functionçš„å†…å»ºç±»å‹éƒ½å¯ä»¥ä½œä¸ºkey
- struct ç±»å‹ä¸åŒ…å«ä¸Šè¿°å­—æ®µï¼Œä¹Ÿå¯ä»¥ä½œä¸ºkey
